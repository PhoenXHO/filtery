/* Filtery v1.2.0
 * Copyright (c) 2022 PhoenixHO
 * Licensed under: MIT License
 * REFER TO LICENSE AT: https://github.com/PhoenXHO/filtery/blob/master/LICENSE
 */
(function(t,e){if(typeof exports==="object"){module.exports=e(t)}else if(typeof define==="function"&&define.amd){define([],e)}else{t.Filtery=e(t)}})(typeof global!=="undefined"?global:this.window||this.global,function(t){"use strict";if(typeof define==="function"&&define.amd){t=window}NodeList.prototype.filter=function(e){return Array.prototype.filter.call(this,function(t){return t.matches(e)})};var s;function Filtery(t,e){s=this;this.defaults={itemSelector:".item",columns:3,gap:10,animationDuration:400,responsive:{}};this.$filterButtons=document.querySelectorAll("#filter a");this.$currentFilter=this.$filterButtons.filter(".current")[0];this.$parent=t;this.$items=this.$parent.querySelectorAll(this.defaults.itemSelector);this.$activeItems=this.$items;this.$hiddenItems=null;this.filter="all";this.columnWidth=0;this.defaults={...this.defaults,...e};this.init()}Filtery.prototype={init:function(){const t=new Event("filtery:load");const e=new Event("filtery:resize");window.addEventListener("load",function(){s.overrideSettings();s.getColumnWidth();s.initCSS();s.initFilters();s.orderItems();s.$parent.dispatchEvent(t)});let i;window.addEventListener("resize",function(){clearTimeout(i);i=setTimeout(function(){s.overrideSettings();s.getColumnWidth();s.orderItems()},100);setTimeout(function(){s.$parent.dispatchEvent(e)},700)})},overrideSettings:function(){let t=Object.entries(this.defaults.responsive);if(!t.length)return;let i=window.innerWidth;let e=t.reduce(function(t,e){e[0]=parseInt(e[0]);return t[0]<=e[0]&&e[0]<i?e:t},[0,{}]);this.defaults={...this.defaults,...e[1]}},getColumnWidth:function(){let t=this.defaults.columns,e=this.columnWidth=(this.$parent.clientWidth-this.defaults.gap*(t-1))/t;this.$items.forEach(function(t){t.style.width=e+"px"})},initCSS:function(){this.$parent.style.position="relative";this.$parent.style.transition="all "+s.defaults.animationDuration+"ms ease";this.$items.forEach(function(t){t.style.position="absolute";t.style.transform="scale3d(1, 1, 1)";t.style.opacity="1";t.style.top="0";t.style.left="0";t.style.transition="all "+s.defaults.animationDuration+"ms ease, width 0s"})},initFilters:function(){if(this.$currentFilter){this.filter=this.$currentFilter.dataset["filter"]}else{this.$currentFilter=this.$filterButtons[0].classList.add("current");this.initFilters()}this.$filterButtons.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault();s.handleFilter(this)})});s.handleFilter(this.$currentFilter)},handleFilter:function(t){let e=t.dataset["filter"];if(e===this.filter)return;this.filter=e;this.$currentFilter.classList.remove("current");t.classList.add("current");this.$currentFilter=t;if(e==="all"){this.$activeItems=this.$items;this.$hiddenItems=null}else{this.$activeItems=this.$items.filter('[data-category="'+e+'"]');this.$hiddenItems=this.$items.filter(':not([data-category="'+e+'"])')}this.orderItems()},orderItems:function(){let r=this.defaults.columns,l=this.columnWidth,o=Array(r).fill(0);let a=this.defaults.gap;if(this.$hiddenItems){this.$hiddenItems.forEach(function(t){t.classList.add("hidden-filtery-item")})}this.$activeItems.forEach(function(t){t.classList.remove("hidden-filtery-item")});this.$activeItems.forEach(function(t,e){let i=e%r,s=i*l,n=o[i];o[i]+=t.offsetHeight+a;t.style.left=(s?s+a*i:0)+"px";t.style.top=n+"px"});this.$parent.style.height=Math.max(...o)-a+"px"}};t.filtery=function(t,e){return new Filtery(t,e)};if(t.jQuery){var $=t.jQuery;$.fn.filtery=function(t){return this.each(function(){new Filtery($.makeArray(this)[0],t)})}}});